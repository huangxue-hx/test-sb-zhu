# 2.3.5需求说明书v1.0
#### 张勇劼
## 1对外路由统一管理
### 1.1需求描述
```
1.租户项目分区页面增加tab页：对外服务
2.对外路由列表可以创建，编辑，删除，查询
3.有多个外网映射地址就有多条记录。
4.创建和编辑对外服务时，选择服务，支持模糊匹配该分区下服务。
5.已停止的服务仍然可以添加对外服务的参数。
6.点击服务名称可以跳到服务详情页面。
7.可以通过类型（http/https/tcp/udp）和负载均衡类型（nginx/bigip-ctrl）筛选对外服务。
8.可以通过ip地址访问暴露出来的服务，如果服务停止运行访问失败。
9.创建或编辑对外服务，增加选择服务输入框，其他和之前编辑服务的对外服务一致。
10.在服务列表编辑的对外服务同样会在分区内对外服务列表中显示。
11.权限：项目管理员。
```
## 2.配置中心私密文件
### 2.1需求描述
```
  1.在配置中心增加一个tab页: 秘钥文件。
  2.秘钥文件在创建服务时可以选择。
  3.秘钥文件使用方法和配置文件相同。
  4.系统管理员可以创建公有集群秘钥文件、系统分区秘钥文件和分区下的秘钥文件。
  5.其他用户只可以创建分区下的秘钥文件。
```
## 3.日志错误信息上下文检索
### 3.1需求描述
```
1.合并2.3.4万花已完成的功能。
```
## 4.主机ssh登录
### 4.1需求描述
```
1.集群主机列表每个主机增加登录主机按钮。
2.用户登录主机时需要填写用户名和密码。
3.固定只有一个弹框，可以添加或删除tab页.
10.权限：系统管理员。
```
## 5.纳管已有集群和分区
### 5.1需求描述
```
1.集群分区列表中添加分配分区功能。
2.选择租户后显示所选租户在分区所在集群下可分配资源。
3.cpu、内存和存储配额分号前展示已使用的资源，分号后展示已分配资源。
4.分配资源不能小于已使用资源。用户分配给分区资源小于已使用资源提示用户。
5.分配资源不能大于可分配资源。用户分配给分区资源大于可分配资源提示用户。
6.批量分配，选择分区，点击加号添加分区，添加的分区排在最上面，点击减号去除分区。
7.选择租户后显示租户在集群内可分配资源。
8.集群已分配给租户资源的租户，才可以被选中。
9.权限：系统管理员。
```
## 6.修改基础镜像，将本地依赖仓库从共享存储改为宿主机存储CI时间缩短60-70%
### 6.1需求描述
```
1.合并中移版本。
```
## 7.公有模版
### 7.1需求描述
```
1.合并中移版本。
```
## 8.vlan-bridge网络方案
### 8.1需求描述
```
1.bridge网络中创建ipool增加vlanid字段。
2.vlanid范围是1-4094。
3.不同vlanid的ip段pod无法互相访问。
4.相同vlanid的ip可以互相访问。
```
## 9.ip池集群分配租户
### 9.1需求描述
```
1.bridge集群详情页面增加tab页：IP资源池。
2.IP资源池列表可以创建IP资源池，编辑，删除。
3.输入ip段，提示用户哪些是可使用or哪些是被用。
4.用户如果填了已使用的ip段提示用户，所填ip段已被使用。
```
## 10.固定ip
### 10.1需求描述
```
1.bridge集群中有分配ip池的分区创建服务时，如果服务只有一个实例，用户可以选择填写ip池中的ip，使podip固定。
2.如果是固定ip的pod不会随状态的变化改变ip。
3.输入ip时，如果Ip已被使用，提示用户ip段已被使用。
```
## 11.平台使用优化需求
### 11.1需求描述
```
1.合并德邦的页面优化部分。
```
## 12.增加自动伸缩的统一管理界面
### 12.1需求描述
```
1.租户项目分区页面增加tab页：自动伸缩。
2.对外路由列表可以创建，编辑，删除，查询。
3.在服务列表编辑服务自动伸缩同样会在分区内对外服务列表中显示。
4.提示文案和原来相同。
5.用户必须填写，扩容规则和缩容规则。
6。扩容规则和缩容规则的维度可以不统一，用户可以自行选择缩容和扩容的规则维度。
7.规则维度分别是：cpu/内存，时间段，自定义指标。
8.星期全选，则重复规则的输入框显示每天.
9.否则显示每周一周四。
10.默认重复规则为空。
11.权限：项目管理员。
12.本期等中移完成后合并
```
## 13.流水线多stage支持，流水线组，多条流水线统一触发
### 13.1需求描述
```
1.合并中移流水线组。












ls /home/workspace/test/test/tt-sb/test-submodule





ls /home/workspace/test/test/tt-sb

ls test-submodule






















```
